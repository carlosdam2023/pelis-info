import{a as F,b as g,c as M,d as D,e as _,f as P,g as I,h as T,i as k,j as q}from"./chunk-35WKNL65.js";import{A as u,C as f,F as d,J as E,M as w,P as S,S as r,T as t,U as a,W as x,X as C,_ as s,aa as N,pa as y,q as m,ta as R,u as v,v as b}from"./chunk-ZTPSYPTV.js";function L(n,i){if(n&1&&(r(0,"div",13),v(),r(1,"svg",14),a(2,"path",15),t(),b(),r(3,"span"),s(4),t()()),n&2){let e=C();f(4),N(" ",e.errorMessage()," ")}}var c={NotEnoughData:"Faltan datos o no se han completado todos los campos",PasswordsDontMatch:"Las contrase\xF1as no coinciden",EmailInvalid:"Email inv\xE1lido",ServerError:"Fallo interno del servidor de datos"},p=class n{fb=m(k);hasError=u(!1);errorMessage=u("");isPosting=u(!1);registerForm=this.fb.group({username:[""],password:[""],passwordConfirm:[""],email:["",g.required,g.email]});authService=m(R);router=m(y);onSubmit(){console.log(this.errorMessage());let{username:i="",password:e="",email:o="",passwordConfirm:l=""}=this.registerForm.value;if(console.log(i,e,o,l),!i||!e||!o||!l){console.log("Faltan datos!"),this.errorMessage.set(c.NotEnoughData),this.activateError();return}if(!this.validateEmail(o)){console.log("Email inv\xE1lido!"),this.errorMessage.set(c.EmailInvalid),this.activateError();return}if(e!==l){console.log("Las contrase\xF1as no coinciden!"),this.errorMessage.set(c.PasswordsDontMatch),this.activateError();return}this.authService.register({username:i,password:e,email:o}).subscribe(G=>{G?(this.router.navigate(["/login"]),console.log("Registro exitoso!"),this.isPosting.set(!1),this.hasError.set(!1)):(console.log("Register fallido!"),this.errorMessage.set(c.ServerError),this.activateError())})}validateEmail(i){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)}activateError(){this.hasError.set(!0),setTimeout(()=>{this.hasError.set(!1)},1e4)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["register-menu"]],decls:29,vars:2,consts:[[1,"min-h-screen","bg-base-200","flex","items-center","justify-center",3,"ngSubmit","formGroup"],[1,"card","w-96","bg-base-100","shadow-xl","animate__animated","animate__backInLeft"],[1,"card-body"],[1,"card-title","justify-center"],[1,"form-control"],[1,"label"],[1,"label-text"],["type","text","placeholder","Email","name","email","required","","formControlName","email",1,"input","input-bordered"],["type","text","placeholder","Nombre de usuario","name","username","required","","formControlName","username",1,"input","input-bordered"],["type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","name","password","required","","formControlName","password",1,"input","input-bordered"],["type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","name","passwordConfirm","required","","formControlName","passwordConfirm",1,"input","input-bordered"],[1,"form-control","mt-6"],[1,"btn","btn-primary","w-full"],["role","alert",1,"alert","alert-error"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"h-6","w-6","shrink-0","stroke-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(e,o){e&1&&(r(0,"form",0),x("ngSubmit",function(){return o.onSubmit()}),r(1,"div",1)(2,"div",2)(3,"h2",3),s(4,"Registrar una cuenta"),t(),r(5,"div",4)(6,"label",5)(7,"span",6),s(8,"Correo electr\xF3nico"),t()(),a(9,"input",7),t(),r(10,"div",4)(11,"label",5)(12,"span",6),s(13,"Nombre de usuario"),t()(),a(14,"input",8),t(),r(15,"div",4)(16,"label",5)(17,"span",6),s(18,"Contrase\xF1a"),t()(),a(19,"input",9),t(),r(20,"div",4)(21,"label",5)(22,"span",6),s(23,"Repetir contrase\xF1a"),t()(),a(24,"input",10),t(),r(25,"div",11)(26,"button",12),s(27,"Entrar"),t()(),E(28,L,5,1,"div",13),t()()()),e&2&&(w("formGroup",o.registerForm),f(28),S(o.hasError()?28:-1))},dependencies:[q,_,F,M,D,T,P,I],encapsulation:2})};var h=class n{constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["register-page"]],decls:1,vars:0,template:function(e,o){e&1&&a(0,"register-menu")},dependencies:[p],encapsulation:2})};export{h as default};
