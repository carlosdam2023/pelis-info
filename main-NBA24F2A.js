import{a as z}from"./chunk-2GJCIHBM.js";import{$ as R,A as B,C as x,F as d,J as S,O as A,P as C,S as r,T as s,U as c,V as k,W as v,X as m,Z as V,_ as b,da as F,e as y,i as N,ja as H,la as E,ma as T,oa as D,pa as h,q as n,qa as L,ra as j,s as p,t as u,ta as l,u as w,v as _,y as M}from"./chunk-ZTPSYPTV.js";var I=(t,o)=>y(void 0,null,function*(){let e=n(l),i=n(h),a=yield N(e.checkStatus());return console.log(a),a?(i.navigateByUrl("/home"),!1):!0});var G=[{path:"home",loadComponent:()=>import("./chunk-H6VXNRTQ.js")},{path:"login",loadComponent:()=>import("./chunk-3EX4MS4M.js"),canMatch:[I]},{path:"register",loadComponent:()=>import("./chunk-SHXQFCMG.js")},{path:"movie/:id",loadComponent:()=>import("./chunk-TZKUOHNY.js")},{path:"**",redirectTo:"login"}];function Q(t,o){let e=n(l).token();console.log("Se ha interceptado la petici\xF3n");let i=t.clone({headers:t.headers.append("Authorization",`Bearer ${e}`)});return o(i)}var W={providers:[F({eventCoalescing:!0}),j(G),E(T([Q]))]};function J(t,o){if(t&1){let e=k();r(0,"div",15)(1,"div",16)(2,"div",17),c(3,"img",18),s()(),r(4,"ul",19)(5,"li")(6,"a",20),b(7),s()(),r(8,"li")(9,"a",21),v("click",function(){p(e);let a=m(2);return u(a.logout())}),b(10,"Logout"),s()()()()}if(t&2){let e,i=m(2);x(7),R((e=i.authService.user())==null?null:e.username)}}function U(t,o){if(t&1){let e=k();r(0,"div")(1,"div",2),w(),r(2,"svg",3),v("click",function(){p(e);let a=m();return u(a.homeClick())}),c(3,"path",4),s(),r(4,"svg",5),v("click",function(){p(e);let a=m();return u(a.showFavs())}),c(5,"path",6),s(),_(),r(6,"label",7),w(),r(7,"svg",8)(8,"g",9),c(9,"circle",10)(10,"path",11),s()(),_(),r(11,"input",12,0),v("keyup.enter",function(){p(e);let a=V(12),Y=m();return u(Y.onSearch(a.value))}),s()()(),r(13,"div",13),c(14,"h3",14),S(15,J,11,1,"div",15),s()()}if(t&2){let e=m();A("navbar bg-base-100 shadow-sm fixed top-0 left-0 w-full z-10 ",e.animation()," flex justify-between items-center px-4"),x(15),C(e.authService.authStatus()=="authenticated"?15:-1)}}var f=class t{movieService=n(z);authService=n(l);router=n(h);query=B("");animation=M("animate__animated animate__backInDown");onSearch(o){console.log(o),this.movieService.showingFavorites.set(!1),this.movieService.setQuery(o)}showFavs(){this.movieService.showingFavorites.set(!0),this.movieService.setQuery(""),this.movieService.onMovieDetail()&&(this.router.navigate(["/home"]),this.movieService.showingMovies.set(this.movieService.favoriteMovies()))}logout(){this.authService.logout(),this.movieService.showingFavorites.set(!1),this.movieService.setQuery(null),this.movieService.favoriteMovies.set([]),this.router.navigate(["/login"])}homeClick(){this.movieService.showingFavorites.set(!1),this.movieService.onMovieDetail.set(!1),this.movieService.setQuery(null)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["navigation-bar"]],inputs:{animation:[1,"animation"]},decls:1,vars:1,consts:[["txtSearch",""],[3,"class"],[1,"flex","items-center","gap-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","routerLink","/home",1,"w-6","h-6","text-gray-800","dark:text-white","hover:cursor-pointer",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m4 12 8-8 8 8M6 10.5V19a1 1 0 0 0 1 1h3v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h3a1 1 0 0 0 1-1v-8.5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"],[1,"input","flex","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"h-[1em]","opacity-50"],["stroke-linejoin","round","stroke-linecap","round","stroke-width","2.5","fill","none","stroke","currentColor"],["cx","11","cy","11","r","8"],["d","m21 21-4.3-4.3"],["type","search","placeholder","Busca una peli!",1,"grow",3,"keyup.enter"],[1,"flex","items-center"],[1,"text-lg","font-bold","px-4"],[1,"dropdown","dropdown-end"],["tabindex","0","role","button",1,"btn","btn-ghost","btn-circle","avatar"],[1,"w-10","rounded-full"],["alt","Avatar","src","https://imgs.search.brave.com/RHpYJTKMaQN1BslC5cWWAv_YsIRFk7zEoLFNvBecqQw/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9zdHls/ZXMucmVkZGl0bWVk/aWEuY29tL3Q1XzJx/aDRhL3N0eWxlcy9j/b21tdW5pdHlJY29u/XzdrZWNkNHVmNGEz/YzEucG5n"],["tabindex","0",1,"menu","menu-sm","dropdown-content","bg-base-100","rounded-box","z-1","mt-3","w-52","p-2","shadow"],[1,"justify-between"],[3,"click"]],template:function(e,i){e&1&&S(0,U,16,4,"div",1),e&2&&C(i.authService.authStatus()=="authenticated"?0:-1)},dependencies:[L],encapsulation:2})};var g=class t{title="pelis-info";authService=n(l);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(e,i){e&1&&c(0,"navigation-bar")(1,"router-outlet")},dependencies:[D,f],encapsulation:2})};H(g,W).catch(t=>console.error(t));
