import{a as f}from"./chunk-2GJCIHBM.js";import{$ as x,B as P,C as a,F as p,J as d,M as h,P as u,Q as S,R as M,S as o,T as n,U as v,W as D,X as l,Y as E,_ as s,ga as F,h as b,ha as C,pa as H,q as m,qa as T,sa as I,ta as k,y as w}from"./chunk-ZTPSYPTV.js";var g=class i{movieService=m(f);router=m(H);movie=w();genres=F(()=>this.movie()?.genres.map(e=>e.name).join(", "));navigateDetail(e){this.router.navigate(["/movie",e])}getPosterUrl(e){return e?`https://image.tmdb.org/t/p/w500${e}`:"https://www.mockofun.com/wp-content/uploads/2019/10/movie-poster-credits-178.jpg"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=p({type:i,selectors:[["movie-card"]],inputs:{movie:[1,"movie"]},decls:11,vars:3,consts:[[1,"card","card-side","bg-base-100","shadow-sm"],["alt","Movie",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-actions","justify-end"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){if(t&1&&(o(0,"div",0)(1,"figure"),v(2,"img",1),n(),o(3,"div",2)(4,"h2",3),s(5),n(),o(6,"p"),s(7),n(),o(8,"div",4)(9,"button",5),D("click",function(){let c;return r.navigateDetail((c=r.movie())==null?null:c.id)}),s(10,"Ver m\xE1s"),n()()()()),t&2){let _,c;a(2),E("src",r.getPosterUrl((_=r.movie())==null?null:_.poster_path),P),a(3),x((c=r.movie())==null?null:c.title),a(2),x(r.genres())}},encapsulation:2})};var j=(i,e)=>e.id;function N(i,e){i&1&&(o(0,"div",0)(1,"div",2)(2,"span",3),s(3,"No has iniciado sesi\xF3n \u{1F62D}"),n(),o(4,"span",4),s(5,"Haz click aqu\xED para entrar"),n()()())}function q(i,e){if(i&1&&v(0,"movie-card",6),i&2){let t=e.$implicit;h("movie",t)}}function $(i,e){if(i&1&&(o(0,"div",5),S(1,q,1,1,"movie-card",6,j),n()),i&2){let t=l(2);a(),M(t.movieService.showingMovies())}}function O(i,e){if(i&1&&v(0,"movie-card",6),i&2){let t=e.$implicit;h("movie",t)}}function Q(i,e){if(i&1&&S(0,O,1,1,"movie-card",6,j),i&2){let t=l(3);M(t.movieResource.value())}}function z(i,e){if(i&1&&(o(0,"div",5),d(1,Q,2,0),n()),i&2){let t=l(2);a(),u(t.movieResource.hasValue()?1:-1)}}function G(i,e){if(i&1&&(o(0,"div",1),d(1,$,3,0,"div",5)(2,z,2,1,"div",5),n()),i&2){let t=l();a(),u(t.movieService.getQuery()?2:1)}}var y=class i{authService=m(k);movieService=m(f);showFavorites=C(()=>{this.movieService.showingFavorites()?this.movieService.showingMovies.set(this.movieService.favoriteMovies()):this.movieService.showingMovies.set(this.movieService.popularMovies())});getUserFavorites=C(()=>{this.authService.user()&&this.getUserFavoriteMovies()});movieResource=I({request:()=>({query:this.movieService.getQuery()}),loader:({request:e})=>e.query?this.movieService.getMoviesByQuery(e.query):b([])});ngOnInit(){this.movieService.onMovieDetail.set(!1),this.getPopularMovies(),this.setShowingMovies()}setShowingMovies(){this.movieService.showingFavorites()?this.movieService.showingMovies.set(this.movieService.favoriteMovies()):this.movieService.showingMovies.set(this.movieService.popularMovies())}getUserFavoriteMovies(){this.movieService.getFavoriteMovies().subscribe(e=>{this.movieService.favoriteMovies.set(e)})}getPopularMovies(){this.movieService.getPopularMovies().subscribe(e=>{this.movieService.popularMovies.set(e)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=p({type:i,selectors:[["HomePage"]],decls:2,vars:1,consts:[[1,"min-h-screen","bg-base-200","flex"],[1,"min-h-screen","bg-base-200","pt-16","px-4"],[1,"animate__animated","animate__fadeIn","animate__delay-1s","flex","flex-col","items-center","justify-center","w-full"],[1,"flex","items-center","justify-center","text-4xl","font-bold"],["routerLink","/login",1,"flex","items-center","justify-center","text-xl","hover:text-accent","cursor-pointer","my-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4","p-4"],[1,"animate__animated","animate__backInUp",3,"movie"]],template:function(t,r){t&1&&d(0,N,6,0,"div",0)(1,G,3,1,"div",1),t&2&&u(r.authService.authStatus()=="not-authenticated"?0:r.authService.authStatus()=="authenticated"?1:-1)},dependencies:[T,g],encapsulation:2})};export{y as default};
